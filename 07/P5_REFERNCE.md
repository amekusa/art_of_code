# まとめのリファレンス（p5.js 編）

[TOC]

---



## p5.js とは？

ビジュアルプログラミングに特化した JavaScript 用のライブラリの一つ。



## ライブラリとは？

便利な関数やクラスなどをまとめたもの。



## スケッチとは？

p5.js で書かれた作品のこと。



## スケッチの基本構成

```js
function setup() {
  // キャンバスを作成
  createCanvas(800, 640); // 幅, 高さ
}

function draw() {
  background(255); // 背景を塗る
}
```



### `setup` 関数

**スケッチ起動時に一回だけ実行される。**
キャンバスの作成や、変数の初期化といったような事はここで行うこと。



### `draw` 関数

**1 秒間に約 60 回**、繰り返し実行される。
**メインの処理**はここで行うこと。



### `preload` 関数

**`setup` 関数よりも先に一回だけ実行される。**
画像や音声, フォントなどの素材を使用したい場合、
`preload` 関数内で**ファイルの読み込み**処理を行うこと。

> 例: 画像の読み込み
>
> ```js
> let img;
> 
> function preload() {
>   img = loadImage('my-photo.jpg');
> }
> ```



---



## 座標系

p5.js の座標系は、**キャンバスの左上** を **座標原点** として定めている。
**座標原点とは `X:0, Y:0` となる位置**のこと。

座標原点から
**右に行くほど X の値が大きくなり**、
**下に行くほど Y の値が多くなる**。



---



## ユーザーインタラクション



### マウスカーソルの座標取得

現在のマウスカーソルの座標は **`mouseX` と `mouseY`** 変数にリアルタイムで反映される。

```js
circle(mouseX, mouseY, 40); // マウスカーソルの位置に円を描画
```



### マウスボタンの判定

マウスボタンを押している間だけ **`mouseIsPressed`** 変数が **真 (true)** になるので、
そのまま **`if` 文の条件**として利用することができる。

```js
if (mouseIsPressed) {
  circle(mouseX, mouseY, 40); // ボタンを押している間だけ、カーソルの位置に円を描画
}
```



---



## p5.js の関数（抜粋）



### `random(最小値, 最大値)`

`最小値` から `最大値` までの間でランダムな数値を返す。

```js
let r = random(0, 100); // 0 から 100 までの乱数
```

---

### `fill(明度)`

### `fill(R, G, B)`

### `fill(R, G, B, 不透明度)`

### `fill(色オブジェクト)`

塗りの色を指定する。

```js
fill(0, 0, 255); // 塗りの色を青に指定
```

---

### `noFill()`

塗りを無しにする。

---

### `stroke(明度)`

### `stroke(R, G, B)`

### `stroke(R, G, B, 不透明度)`

### `stroke(色オブジェクト)`

描線（輪郭線）の色を指定する。

```js
stroke(255, 0, 0); // 描線の色を赤に指定
```

---

### `strokeWeight(太さ)`

描線の太さを指定する。

---

### `noStroke()`

描線を無しにする。

---

### `rect(始点X, 始点Y, 幅, 高さ)`

矩形（四角形） を描画する。
始点は左上の角の座標を指す。

---

### `circle(中心X, 中心Y, 直径)`

正円を描画する。

---

### `ellipse(中心X, 中心Y, 幅, 高さ)`

円を描画する。

---

### `line(始点X, 始点Y, 終点X, 終点Y)`

線分を描画する。

---

### `text(文字列, 位置X, 位置Y)`

文字列を描画する。

---

### `colorMode(モード)`

### `colorMode(モード, 最大値)`

色の指定方法を変更する。（デフォルトは RGB モード）
`最大値` は色の各パラメータの最大値。（デフォルトは 255）

```js
colorMode(HSB); // HSB モードに変更
colorMode(HSL); // HSL モードに変更
colorMode(RGB); // RGB モードに変更（デフォルト）
```

```js
colorMode(HSL);    // HSL モード
fill(0, 255, 127); // 色相, 彩度, 輝度
```

```js
colorMode(RGB, 100); // RGB モード, 最大値 100
fill(100, 0, 0);     // R:100, G:0, B:0
```

---

### `translate(移動量X, 移動量Y)`

描画の基準点（座標原点）をずらす。



---

[TOC]

---

*Jan 13, 2022*

Satoshi Soma / 相馬 聡
[github.com/amekusa](https://github.com/amekusa/)

