---
marp: true
paginate: true
theme: custom
------

<!-- _class: cover -->

<h1 class="logo">ART_OF_<b>CODE</b> #2</h1>
<p class="title">p5.js で学ぶ JavaScript #2</p>
<p class="author">&copy; 2023 Satoshi Soma</p>

---

## 前回のおさらい 1/2
- JavaScript は HTML ファイルに *`<script>`* タグを記述して読み込む。

```html
<script src="hello.js"></script>
```

- `<script>` タグの中に直接 JS を記述することも可。

```html
<script>
  alert('Hello World!');
</script>
```

---

## 前回のおさらい 2/2
- `alert` は任意の文字列をポップアップ表示する命令。

```js
alert('こんにちは！');
```

---

# 変数 (variable) でモノを動かしてみよう

---

p5.js エディタで *円を描画* してみよう。

```js
function setup() { // この括弧の中は最初に一回実行される
  createCanvas(400, 400);
}

function draw() { // この括弧の中は毎秒60回実行される
  background(220);
  circle(100, 150, 50); // ここに追記する
}
```

円を描画するには `circle` という命令を実行させればよい。

---

`circle` 命令には **3つのパラメータ** が存在する。
パラメータは `()` の中に **`,` カンマ区切りで列挙** する。

```js
circle(100, 150, 50);
```

- *最初の2つの数値* は **円の位置** を指定する。
  - 1つ目は <b class="blue">X 座標（横位置）</b>
  - 2つ目は <b class="green">Y 座標（縦位置）</b>
- *最後の数値* は **円の大きさ（直径）** を指定する。

ちなみに p5.js の座標系は *左上が <b class="blue">X:0</b>, <b class="green">Y:0</b><small>（座標原点）</small>* である。
試しにパラメータを適当に変えて、円の位置と大きさの変化を確認してみよう。

---

`circle` 命令のパラメータの意味は理解できたが、
残念ながらこのままでは *円を動かす* ことはできない。
**プログラムを実行した時点で数値は完全に固定されてしまう** からだ。
円を動かすには **プログラムを実行中に数値を変化させる** しかない。

それを実現するには *変数（variable）* を使えばよい。

---

## 変数（variable）
次のような **容れ物** をイメージしてほしい。
- どんな **値（数や文字列）** でも一つだけ入れることができる。
- 入れた値を後から **変更** することもできる。
- 好きな **名前** をつけて呼ぶことができる。
- 名前を後から変えることはできない。

変数も大体このような性質のものだ。

---

### 変数を用意する
JS で変数を使うには最初に、使う変数の **宣言** を行う必要がある。

```js
let 変数名 = 初期値;
var 変数名 = 初期値;  // let ではなく var でも可。ただし非推奨
```

`変数名` は容れ物の名前。
`初期値` は容れ物に最初に入れる値。

**`02/variables.js`** を [p5.js Editor](https://editor.p5js.org/) で実行してみよう。
<small>（コードを全文コピーする時は **`Cmd` + `A` で全選択** してから `Cmd` + `C` ）</small>

<hr>

**変数の初期値** を適当に変えて、表示の変化を確認してみよう。
現段階では円はまだ動かなくてよい。

---

変数に入れる値は、**数値** なら普通に数字を書けばいい。
ただし、**必ず半角数字を使う**こと。

```js
let a = 255;  // 整数
let b = 3.14; // 小数点を含む値も OK
let c = -2;   // 負数
```

**文字列** の場合は、**`"（ダブルクォート）`** か **`'（シングルクォート）`** で囲む必要がある。

```js
let a = 'おはよう';   // シングルクォート
let b = "こんにちは"; // ダブルクォート
```
クォートは **半角** でないとエラーになるので気をつけよう。

---

## 四則演算
変数に入れる値には、**四則演算**を用いることができる。
すなわち **足し算**, **引き算**, **掛け算**, **割り算** である。

```js
let x = 1 + 2; // x = 3   (足し算)
let x = 3 - 4; // x = -1  (引き算)
let x = 5 * 6; // x = 30  (掛け算)
let x = 8 / 4; // x = 2   (割り算)

let x = (1 + 2) * (3 - 4); // x = 3 * -1
                           // x = -3
```

---

**変数そのものを演算に含める**ことも可能である。

```js
let x = 10;
let y = x / 5; // y = 10 / 5
               // y = 2

let z = x * y; // z = 10 * 2
               // z = 20
```

---

文字列の場合は **足し算のみ** 可能である。
二つの文字列を足し算した場合、**連結されて一つの文字列** になる。

```js
let x = 'P' + 'LUCK';  // x = 'PLUCK'
```

```js
let y = 'LUCK & ' + x; // y = 'LUCK & PLUCK'
```

<p style="text-align:right"><small>This is JoJo reference btw...</small></p>

---

## 変数の値は変えられる
変数は **宣言した後** でも **別の値** を代入することができる。

```js
let x = 0; // 初期値: 0
x = x + 1; // x = 1 （自分自身に 1 を足す）
x = x + 1; // x = 2 （自分自身に 1 を足す）
x = x + 1; // x = 3 （自分自身に 1 を足す）
alert(x);  // '3'

x = 100;   // 100 で上書き
alert(x);  // '100'
```

---

ちなみに、

```js
x = x + 1; // 1 増やす
```

は

```js
x++;       // 1 増やす（インクリメント）
```

このように書くこともできる。
**短縮記法** の一種で、**インクリメント** と呼ぶ。

---

**演習:**
`variables.js` の変数にいろいろと変更を加えてみよう。
サンプルコード: `heartbeat.js` も参考までに見てください。

---

## 関数 (function)

---

- 関数とは、**好きな時に呼び出せて**、**様々な仕事をしてくれる** 便利な道具
- 関数はそれぞれ**固有の名前**と**仕事**があり、
  名前を呼ぶことでその仕事を実行させることができる
- 実際は以下のように記述して呼び出す:

```js
関数名();
```

前回使った `alert` 関数なら「alert」という名前を持ち、
ポップアップを表示するという仕事を持っている、
ということになる。

---

### 関数の引数 (parameter)
関数のなかには **引数（パラメタ）** を持つものが存在する。
関数を呼び出す際に*引数も同時に渡す*と、
**渡した引数の値によって仕事の内容に変化をもたらす**ことができる。

`alert` 関数なら、*引数として渡した文字列*が
ポップアップウィンドウの内容として表示される。

```js
alert('Hello World! こんにちは。');
```

---

### 関数のイメージ
関数は **函数** と表記されることもある。（函 は「はこ」という意味）
次のような箱をイメージしてほしい。

- フタは閉じていて **中は見えない**
- **入口** と **出口** が一つづつ

---

この箱に

- 林檎を 1 個 :apple: 入れてみたら、林檎が 2 個 :apple: :apple: 出てきた。
- 猫を 2 匹 :cat: :cat: 入れてみたら、猫が 4 匹 :cat: :cat: :cat: :cat: 出てきた。
- では羊を 3 匹 :sheep: :sheep: :sheep: 入れたら？

**箱に入れたモノ** と **出てくるモノ** の **関係** には、
**一定の法則性** が存在する。

---

この箱は、入れた物を **2 倍 にして返して** くれる **カラクリ箱**。
この箱を **関数** として表すと、

```
f(x) = 2x
```

- **`f`** は **function（ファンクション）** の頭文字
- **`x`** は **パラメタ** または **引数（ひきすう）**
- 右辺は、この関数の **カラクリの正体、法則**

この関数は、
**パラメタとして渡した数字に、2 を掛けて返して**くれる
という機能を持つ。

---

パラメタ ＝ **箱に入れる物** ＝ **入力 (Input)**
右辺（計算結果）＝ **箱から出てきた物** ＝ **出力 (Output)**

```
f(🍎) = 2🍎
f(🐱) = 2🐱
f(🐑) = 2🐑
```

---

つまり関数とは、**入力と出力を持ち、
入力に応じて一定の計算結果を出力する機械**のようなものだと想像できる。

パソコンで例えるなら:
- **入力:** キーボード, マウス, ペンタブ, マイク, MIDIポート 等
- **出力:** ディスプレイ, スピーカー, イヤフォンジャック 等



---

# JS で関数を書いてみよう

---

すでに p5.js で用意されている関数をいくつか学んだが、
自分で一から **オリジナルの関数を作る** こともできる。

関数を作ることは **「定義する」** と言う。
さっそく JS で関数を定義してみよう。

---

### 関数の書き方

```js
function 関数名() {
    関数の内容
}
```

`関数の内容` には普通にプログラムを書くことができる。
しかし、**関数を実行しない限り、その内容も実行されることはない。**

関数を実行するには:

```js
関数名();
```

と記述する。

---

関数から別の関数を実行することも可能だ。
例として、関数 `hello` を定義し、そこから `alert` 関数を呼び出してみよう。

```js
// 関数:hello の定義
function hello() {
    let msg = 'こんにちは'; // 変数:msg に 'こんにちは' を格納
    alert(msg);           // alert 関数に msg を渡す
}
```

定義した関数 `hello` を実行する。

```js
hello();
```

---

### パラメタ
先ほど定義した関数には **パラメタ（引数）** が存在しなかった。
今度は **パラメタ付きの関数** を定義してみよう。
パラメタは `()` の中に記述する。

```js
// 関数:greet   引数:name
function greet(name) {
    let msg = 'こんにちは、'; // 変数:msg に 'こんにちは、' を格納
    msg = msg + name;       // msg の後ろに 引数:name をくっつける
    alert(msg);             // alert 関数に msg を渡す
}
```

---

パラメタ付きの関数は、
実行する際、`()` 内に **入力したい値（数値や文字列）** を入れることで、
関数内でその引数が **入力値に置き換わる。**

試しに定義した関数 `greet` に **任意の文字列** を渡して実行してみよう。

```js
greet('太郎'); // 引数:name に '太郎' を渡す
greet('花子'); // 引数:name に '花子' を渡す
```

`greet` 関数内の `name` が、**渡した文字列に置き換わって**実行されるはずだ。

---

### 返り値（戻り値）
関数内から何らかの **計算結果を返す** には **`return`** 文を使う。

```js
function multiply(x) {
    let r = x * 2; // 引数:x に 2 を掛け、変数:r に格納
    return r;      // 変数:r を返す
}
```

---

`return` で返ってくる値は、その関数の **返り値（戻り値）** と言う。

返り値は **変数に代入** することもできる。

```js
let sheeps = multiply(3); // sheeps = 3 * 2
                          // sheeps = 6
```

返り値を **他の関数に引数として渡したり**、
**演算に含めたり** することもできる。

```js
alert(multiply(100)); // alert(200)
```

```js
alert('羊が' + multiply(500) + '匹'); // alert('羊が1000匹')
```

---

## 演習 2:
サンプルコード **`heartbeat2.js`** を参考に、
関数と変数を駆使して動くアートを作ってみよう。
